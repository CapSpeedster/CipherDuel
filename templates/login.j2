<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/static/style.css"/>
    </head>
    <body>
        <header>
            Hello User
        </header>
        <form action="/login" method="POST">
            <div>
                <input placeholder='username' required name="username"/>
            </div>
            <div>
                <input placeholder='password' required name='password' type="password"/>
                <button id="passwordVis" onclick="return false">&#x1F512;</button>
            </div>
            <div>
                <button name='mode' value="login">Login</button>
                <button name='mode' value="register">Register</button>
            </div>
        </form>

        {% with errors = get_flashed_messages(category_filter=["error"]) %}
            {% if errors %}
                {% for msg in errors%}
                    {{msg}}
                {% endfor %}
            {% endif %}
        {% endwith %}
    
        <script type="text/javascript">
            names=
            function init(){
                let btn = document.getElementById('passwordVis')
                btn.addEventListener('click', function(event){
                    event.preventDefault();

                    text = "&#x1F512;"
                    mode = 'password'
                    if( event.target.innerHTML === "ðŸ”’" ){
                        text = "&#x1F441;"
                        mode = 'text'
                    }
                    event.target.innerHTML = text;
                    document.querySelector('input[name="password"]').type=mode
                })
            }
            window.onload = init;

        </script>
    </body>
</html>